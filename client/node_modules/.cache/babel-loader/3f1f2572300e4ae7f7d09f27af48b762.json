{"ast":null,"code":"import _classCallCheck from \"/Users/berry/antd-demo/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/berry/antd-demo/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/berry/antd-demo/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/berry/antd-demo/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/berry/antd-demo/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/berry/antd-demo/client/src/pages/CreateMember.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'antd';\nimport axios from 'axios';\nimport CollectionCreateForm from './CreateMemberForm';\n\nvar CreateMember =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateMember, _Component);\n\n  function CreateMember() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateMember);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateMember)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      visible: false\n    };\n\n    _this.showModal = function () {\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleCancel = function () {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleCreate = function () {\n      var form = _this.formRef.props.form;\n      var formFields = form.getFieldsValue();\n      console.log(formFields.membername);\n      form.validateFields(function (err, values) {\n        if (err) {\n          return;\n        }\n\n        console.log('Received values of form: ', values);\n        form.resetFields();\n\n        _this.setState({\n          visible: false\n        });\n      });\n      axios.post('http://localhost:4000/members/register', {\n        membername: formFields.membername,\n        room: formFields.room,\n        email: formFields.email,\n        tel: formFields.tel,\n        password: formFields.password\n      }).then(function (data) {\n        console.log(data);\n      }).catch(function (error) {\n        console.log(error);\n        alert(error.response.data);\n      });\n    };\n\n    _this.saveFormRef = function (formRef) {\n      _this.formRef = formRef;\n    };\n\n    return _this;\n  }\n\n  _createClass(CreateMember, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Create Member\"), React.createElement(CollectionCreateForm, {\n        wrappedComponentRef: this.saveFormRef,\n        visible: this.state.visible,\n        onCancel: this.handleCancel,\n        handleSubmit: this.handleCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CreateMember;\n}(Component);\n\nexport default CreateMember;","map":{"version":3,"sources":["/Users/berry/antd-demo/client/src/pages/CreateMember.js"],"names":["React","Component","Button","axios","CollectionCreateForm","CreateMember","state","visible","showModal","setState","handleCancel","handleCreate","form","formRef","props","formFields","getFieldsValue","console","log","membername","validateFields","err","values","resetFields","post","room","email","tel","password","then","data","catch","error","alert","response","saveFormRef"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAsB,MAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,oBAAP,MAAiC,oBAAjC;;IAIMC,Y;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,OAAO,EAAE;AADH,K;;UAIRC,S,GAAY,YAAM;AAChB,YAAKC,QAAL,CAAc;AAAEF,QAAAA,OAAO,EAAE;AAAX,OAAd;AACD,K;;UAEDG,Y,GAAe,YAAM;AACnB,YAAKD,QAAL,CAAc;AAAEF,QAAAA,OAAO,EAAE;AAAX,OAAd;AACD,K;;UAEDI,Y,GAAe,YAAM;AAAA,UACZC,IADY,GACH,MAAKC,OAAL,CAAaC,KADV,CACZF,IADY;AAEnB,UAAMG,UAAU,GAAGH,IAAI,CAACI,cAAL,EAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,UAAU,CAACI,UAAvB;AACAP,MAAAA,IAAI,CAACQ,cAAL,CAAoB,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACnC,YAAID,GAAJ,EAAS;AACP;AACD;;AACDJ,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCI,MAAzC;AACAV,QAAAA,IAAI,CAACW,WAAL;;AACA,cAAKd,QAAL,CAAc;AAAEF,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD,OAPD;AAQAJ,MAAAA,KAAK,CAACqB,IAAN,CAAW,wCAAX,EAAoD;AAChDL,QAAAA,UAAU,EAAEJ,UAAU,CAACI,UADyB;AAEhDM,QAAAA,IAAI,EAAEV,UAAU,CAACU,IAF+B;AAGhDC,QAAAA,KAAK,EAAEX,UAAU,CAACW,KAH8B;AAIhDC,QAAAA,GAAG,EAAEZ,UAAU,CAACY,GAJgC;AAKhDC,QAAAA,QAAQ,EAAEb,UAAU,CAACa;AAL2B,OAApD,EAOKC,IAPL,CAOU,UAACC,IAAD,EAAU;AAChBb,QAAAA,OAAO,CAACC,GAAR,CAAYY,IAAZ;AACD,OATH,EASKC,KATL,CASW,UAACC,KAAD,EAAW;AAClBf,QAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACAC,QAAAA,KAAK,CAACD,KAAK,CAACE,QAAN,CAAeJ,IAAhB,CAAL;AACD,OAZH;AAaD,K;;UAEDK,W,GAAc,UAACtB,OAAD,EAAa;AACzB,YAAKA,OAAL,GAAeA,OAAf;AACD,K;;;;;;;6BAEQ;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,OAAO,EAAE,KAAKL,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE,oBAAC,oBAAD;AACE,QAAA,mBAAmB,EAAE,KAAK2B,WAD5B;AAEE,QAAA,OAAO,EAAE,KAAK7B,KAAL,CAAWC,OAFtB;AAGE,QAAA,QAAQ,EAAE,KAAKG,YAHjB;AAIE,QAAA,YAAY,EAAE,KAAKC,YAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF;AAWD;;;;EAxDwBV,S;;AA2D3B,eAAeI,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Button} from 'antd';\nimport axios from 'axios';\nimport CollectionCreateForm from './CreateMemberForm';\n\n\n\nclass CreateMember extends Component {\n  state = {\n    visible: false,\n  };\n\n  showModal = () => {\n    this.setState({ visible: true });\n  }\n\n  handleCancel = () => {\n    this.setState({ visible: false });\n  }\n\n  handleCreate = () => {\n    const {form } = this.formRef.props;\n    const formFields = form.getFieldsValue();\n    console.log(formFields.membername)\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      console.log('Received values of form: ', values);\n      form.resetFields();\n      this.setState({ visible: false });\n    });\n    axios.post('http://localhost:4000/members/register',{\n        membername: formFields.membername,\n        room: formFields.room,\n        email: formFields.email,\n        tel: formFields.tel,\n        password: formFields.password\n        \n      }).then((data) => {\n        console.log(data)\n      }).catch((error) => {\n        console.log(error);\n        alert(error.response.data);\n      })\n  }\n\n  saveFormRef = (formRef) => {\n    this.formRef = formRef;\n  }\n\n  render() {\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.showModal}>Create Member</Button>\n        <CollectionCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          handleSubmit={this.handleCreate}\n        />\n      </div>\n    );\n  }\n}\n\nexport default CreateMember;"]},"metadata":{},"sourceType":"module"}