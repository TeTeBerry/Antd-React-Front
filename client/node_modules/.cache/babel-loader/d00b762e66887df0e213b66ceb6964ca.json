{"ast":null,"code":"import _classCallCheck from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _temp,\n    _jsxFileName = \"/Users/berry/antd-demo/src/pages/Member.js\";\n\nimport React, { Component } from 'react';\nimport CreateMember from './CreateMember';\nimport { Table } from 'antd';\nimport { Modal, Button, Divider, Form, Input } from 'antd';\nimport axios from 'axios';\nvar confirm = Modal.confirm;\nvar domain = 'http://localhost:4000/members';\nvar token = localStorage.getItem('id_token');\nvar header = {\n  'Authorization': \"Bearer \".concat(token)\n};\nvar CollectionCreateForm = Form.create({\n  name: 'form_in_modal'\n})((_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Member, _Component);\n\n  function Member() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Member);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Member)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      memberList: []\n    };\n\n    _this.deleteMember = function (_id) {\n      axios.delete(\"\".concat(domain, \"/\") + _id, {\n        headers: header\n      }).then(function (data) {\n        _this.setState({\n          memberList: _this.state.memberList.filter(function (item) {\n            return item._id !== _id;\n          })\n        });\n\n        console.log(data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Member, [{\n    key: \"showDeleteConfirm\",\n    value: function showDeleteConfirm(_id, membername) {\n      var _this2 = this;\n\n      console.log(_id);\n      confirm({\n        title: \"Are you sure delete \".concat(membername, \"?\"),\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk: function onOk() {\n          _this2.deleteMember(_id);\n\n          console.log('OK');\n        },\n        onCancel: function onCancel() {\n          console.log('Cancel');\n        }\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      axios.get(domain, {\n        headers: header\n      }).then(function (data) {\n        _this3.setState({\n          memberList: data.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          visible = _this$props.visible,\n          onCancel = _this$props.onCancel,\n          onCreate = _this$props.onCreate,\n          form = _this$props.form;\n      var getFieldDecorator = form.getFieldDecorator;\n      var columns = [{\n        title: 'Username',\n        dataIndex: 'username'\n      }, {\n        title: 'First Name',\n        dataIndex: 'firstName'\n      }, {\n        title: 'Last Name',\n        dataIndex: 'lastName'\n      }, {\n        title: 'Action',\n        key: 'action',\n        render: function render(text, record) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, React.createElement(Button, {\n            onClick: function onClick() {\n              return _this4.showEditMoal(record._id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, \"Edit\"), React.createElement(Divider, {\n            type: \"vertical\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }), React.createElement(Button, {\n            onClick: function onClick() {\n              return _this4.showDeleteConfirm(record._id, record.membername);\n            },\n            type: \"danger\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }, \"Delete\"));\n        }\n      }];\n      var memberList = this.state.memberList;\n      return React.createElement(CreateMember, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(Table, {\n        rowKey: function rowKey(record) {\n          return record._id;\n        },\n        columns: columns,\n        dataSource: memberList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        visible: visible,\n        title: \"Edit Member\",\n        okText: \"Edit\",\n        onCancel: onCancel,\n        onOk: onCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Form, {\n        layout: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        label: \"Member Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, getFieldDecorator('membername', {\n        rules: [{\n          required: true,\n          message: 'Please input member name!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeMembername,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Phone Number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, getFieldDecorator('tel', {\n        rules: [{\n          required: true,\n          message: 'Please input phone number!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeTel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Room Number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, getFieldDecorator('room', {\n        rules: [{\n          required: true,\n          message: 'Please input room number!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeRoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"E-mail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, getFieldDecorator('email', {\n        rules: [{\n          type: 'email',\n          message: 'The input is not valid E-mail!'\n        }, {\n          required: true,\n          message: 'Please input your E-mail!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, getFieldDecorator('password', {\n        rules: [{\n          required: true,\n          message: 'Please input your Password!'\n        }]\n      })(React.createElement(Input, {\n        type: \"password\",\n        onChange: this.onChangePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Member;\n}(Component), _temp));\n\nvar CollectionsPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionsPage, _React$Component);\n\n  function CollectionsPage() {\n    var _getPrototypeOf3;\n\n    var _this5;\n\n    _classCallCheck(this, CollectionsPage);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this5 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(CollectionsPage)).call.apply(_getPrototypeOf3, [this].concat(args)));\n    _this5.state = {\n      visible: false,\n      membername: '',\n      room: '',\n      password: '',\n      tel: '',\n      email: ''\n    };\n\n    _this5.showModal = function () {\n      _this5.setState({\n        visible: true\n      });\n    };\n\n    _this5.handleCancel = function () {\n      _this5.setState({\n        visible: false\n      });\n    };\n\n    _this5.handleCreate = function () {\n      var form = _this5.formRef.props.form;\n      form.validateFields(function (err, values) {\n        if (err) {\n          return;\n        }\n\n        console.log('Received values of form: ', values);\n        form.resetFields();\n\n        _this5.setState({\n          visible: false\n        });\n      });\n      axios.post('http://localhost:4000/members/register', {\n        membername: _this5.state.membername,\n        room: _this5.state.room,\n        email: _this5.state,\n        tel: _this5.state.tel,\n        password: _this5.state.password\n      }).then(function (data) {\n        console.log(data);\n      }).catch(function (error) {\n        console.log(error);\n        alert(error.response.data);\n      });\n    };\n\n    _this5.saveFormRef = function (formRef) {\n      _this5.formRef = formRef;\n    };\n\n    return _this5;\n  }\n\n  _createClass(CollectionsPage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Create Member\"), React.createElement(CollectionCreateForm, {\n        wrappedComponentRef: this.saveFormRef,\n        visible: this.state.visible,\n        onCancel: this.handleCancel,\n        onCreate: this.handleCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CollectionsPage;\n}(React.Component);\n\nexport default CollectionsPage;","map":{"version":3,"sources":["/Users/berry/antd-demo/src/pages/Member.js"],"names":["React","Component","CreateMember","Table","Modal","Button","Divider","Form","Input","axios","confirm","domain","token","localStorage","getItem","header","CollectionCreateForm","create","name","state","memberList","deleteMember","_id","delete","headers","then","data","setState","filter","item","console","log","catch","error","membername","title","okText","okType","cancelText","onOk","onCancel","get","props","visible","onCreate","form","getFieldDecorator","columns","dataIndex","key","render","text","record","showEditMoal","showDeleteConfirm","rules","required","message","onChangeMembername","onChangeTel","onChangeRoom","type","onChangeEmail","onChangePassword","CollectionsPage","room","password","tel","email","showModal","handleCancel","handleCreate","formRef","validateFields","err","values","resetFields","post","alert","response","saveFormRef"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CreateMember from './CreateMember';\nimport { Table } from 'antd';\nimport { Modal,Button,Divider,Form, Input } from 'antd';\nimport axios from 'axios';\n\nconst confirm = Modal.confirm;\nconst domain = 'http://localhost:4000/members';\nconst token = localStorage.getItem('id_token')\nconst header = {'Authorization' : `Bearer ${token}`}\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n\nclass Member extends Component {\n    state = {\n        memberList: []\n    }\n\n    deleteMember = (_id)=> {\n        axios.delete(`${domain}/`+_id,{ headers:header})\n        .then((data) => {\n          this.setState({\n            memberList: this.state.memberList.filter(item => item._id !== _id)\n          })\n          console.log(data);\n        }).catch((error) => {\n          console.log(error);\n        })\n      }\n\n      showDeleteConfirm(_id,membername){\n        console.log(_id)\n        confirm({\n          title: `Are you sure delete ${membername}?`,\n          okText: 'Yes',\n          okType: 'danger',\n          cancelText: 'No',\n          onOk:()=>{\n            this.deleteMember(_id);\n            console.log('OK')\n          },\n          onCancel() {\n            console.log('Cancel');\n          },\n        });\n      }\n    \n    componentDidMount() {\n      axios.get(domain, {headers: header})\n      .then((data) => {\n          this.setState({\n              memberList: data.data\n          });\n      }).catch((error) => {\n          console.log(error);\n      })\n\n    }\n    render(){\n        const {\n            visible, onCancel, onCreate, form,\n          } = this.props;\n        const { getFieldDecorator } = form;\n        const columns = [{\n            title: 'Username',\n            dataIndex: 'username',\n          }, {\n            title: 'First Name',\n            dataIndex: 'firstName',\n          }, {\n            title: 'Last Name',\n            dataIndex: 'lastName',\n          }, {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n        <span>\n          <Button onClick={() => this.showEditMoal(record._id)}>Edit</Button>\n          <Divider type=\"vertical\" />\n          <Button onClick={() =>this.showDeleteConfirm(record._id,record.membername)} type=\"danger\">Delete</Button>\n        </span>\n            ),\n          }];\n          \n          const { memberList } = this.state;\n        return(\n            <CreateMember/>,\n\n            <Table  rowKey={record => record._id} columns={columns} dataSource={memberList} />,\n\n            <Modal\n            visible={visible}\n            title=\"Edit Member\"\n            okText=\"Edit\"\n            onCancel={onCancel}\n            onOk={onCreate}\n          >\n            <Form layout=\"vertical\">\n              <Form.Item label=\"Member Name\">\n                {getFieldDecorator('membername', {\n                  rules: [{ required: true, message: 'Please input member name!' }],\n                })(\n                  <Input onChange={this.onChangeMembername}/>\n                )}\n              </Form.Item>\n              <Form.Item label=\"Phone Number\">\n              {getFieldDecorator('tel', {\n                  rules: [{ required: true, message: 'Please input phone number!' }],\n                })(\n                  <Input onChange={this.onChangeTel}/>\n                )}\n              \n              </Form.Item>\n              <Form.Item label=\"Room Number\">\n              {getFieldDecorator('room', {\n                  rules: [{ required: true, message: 'Please input room number!' }],\n                })(\n                  <Input onChange={this.onChangeRoom}/>\n                )}\n              \n              </Form.Item>\n              <Form.Item\n            label=\"E-mail\"\n          >\n            {getFieldDecorator('email', {\n              rules: [{\n                type: 'email', message: 'The input is not valid E-mail!',\n              }, {\n                required: true, message: 'Please input your E-mail!',\n              }],\n            })(\n              <Input onChange={this.onChangeEmail}/>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Password\">\n            {getFieldDecorator('password', {\n              rules: [{ required: true, message: 'Please input your Password!' }],\n            })(\n              <Input type=\"password\" onChange={this.onChangePassword}/>\n            )}\n          </Form.Item>\n            </Form>\n          </Modal>\n        );\n    }\n  }\n);\nclass CollectionsPage extends React.Component {\n    state = {\n      visible: false,\n      membername: '',\n      room: '',\n      password: '',\n      tel: '',\n      email: '',\n    };\n  \n    showModal = () => {\n      this.setState({ visible: true });\n    }\n  \n    handleCancel = () => {\n      this.setState({ visible: false });\n    }\n  \n    handleCreate = () => {\n      const form = this.formRef.props.form;\n      form.validateFields((err, values) => {\n        if (err) {\n          return;\n        }\n  \n        console.log('Received values of form: ', values);\n        form.resetFields();\n        this.setState({ visible: false });\n      });\n      axios.post('http://localhost:4000/members/register',{\n        membername: this.state.membername,\n        room: this.state.room,\n        email: this.state,\n        tel: this.state.tel,\n        password: this.state.password\n      }).then((data) => {\n        console.log(data)\n      }).catch((error) => {\n        console.log(error);\n        alert(error.response.data);\n      })\n    }\n  \n    saveFormRef = (formRef) => {\n      this.formRef = formRef;\n    }\n  \n    render() {\n      return (\n        <div>\n          <Button type=\"primary\" onClick={this.showModal}>Create Member</Button>\n          <CollectionCreateForm\n            wrappedComponentRef={this.saveFormRef}\n            visible={this.state.visible}\n            onCancel={this.handleCancel}\n            onCreate={this.handleCreate}\n          />\n        </div>\n      );\n    }\n  }\nexport default CollectionsPage;"]},"metadata":{},"sourceType":"module"}