{"ast":null,"code":"import _classCallCheck from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/berry/antd-demo/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/berry/antd-demo/src/pages/Member.js\";\nimport React, { Component } from 'react';\nimport CreateMember from './CreateMember';\nimport { Table } from 'antd';\nimport { Modal, Button, Divider, Form, Input } from 'antd';\nimport axios from 'axios';\nvar confirm = Modal.confirm;\nvar domain = 'http://localhost:4000/members';\nvar token = localStorage.getItem('id_token');\nvar header = {\n  'Authorization': \"Bearer \".concat(token)\n};\n\nvar Member =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Member, _Component);\n\n  function Member() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Member);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Member)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      memberList: [],\n      visible: false,\n      membername: '',\n      room: '',\n      password: '',\n      tel: '',\n      email: ''\n    };\n\n    _this.showEditMoal = function () {\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleCancel = function () {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleCreate = function () {\n      var form = _this.formRef.props.form;\n      form.validateFields(function (err, values) {\n        if (err) {\n          return;\n        }\n\n        console.log('Received values of form: ', values);\n        form.resetFields();\n\n        _this.setState({\n          visible: false\n        });\n      });\n    };\n\n    _this.saveFormRef = function (formRef) {\n      _this.formRef = formRef;\n    };\n\n    _this.deleteMember = function (_id) {\n      axios.delete(\"\".concat(domain, \"/\") + _id, {\n        headers: header\n      }).then(function (data) {\n        _this.setState({\n          memberList: _this.state.memberList.filter(function (item) {\n            return item._id !== _id;\n          })\n        });\n\n        console.log(data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Member, [{\n    key: \"showDeleteConfirm\",\n    value: function showDeleteConfirm(_id, membername) {\n      var _this2 = this;\n\n      console.log(_id);\n      confirm({\n        title: \"Are you sure delete \".concat(membername, \"?\"),\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk: function onOk() {\n          _this2.deleteMember(_id);\n\n          console.log('OK');\n        },\n        onCancel: function onCancel() {\n          console.log('Cancel');\n        }\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      axios.get(domain, {\n        headers: header\n      }).then(function (data) {\n        _this3.setState({\n          memberList: data.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var columns = [{\n        title: 'Member Name',\n        dataIndex: 'membername'\n      }, {\n        title: 'Room Number',\n        dataIndex: 'room'\n      }, {\n        title: 'Phone Number',\n        dataIndex: 'tel'\n      }, {\n        title: 'Email',\n        dataIndex: 'email'\n      }, {\n        title: 'Action',\n        key: 'action',\n        render: function render(record) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }, React.createElement(Button, {\n            onClick: function onClick() {\n              return _this4.showEditMoal(record._id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, \"Edit\"), React.createElement(Divider, {\n            type: \"vertical\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }), React.createElement(Button, {\n            onClick: function onClick() {\n              return _this4.showDeleteConfirm(record._id, record.membername);\n            },\n            type: \"danger\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, \"Delete\"));\n        }\n      }];\n      var memberList = this.state.memberList;\n      return React.createElement(CreateMember, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(Table, {\n        rowKey: function rowKey(record) {\n          return record._id;\n        },\n        columns: columns,\n        dataSource: memberList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(CollectionCreateForm, {\n        wrappedComponentRef: this.saveFormRef,\n        visible: this.state.visible,\n        onCancel: this.handleCancel,\n        onCreate: this.handleCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Member;\n}(Component);\n\nvar CollectionCreateForm = Form.create({\n  name: 'form_in_modal'\n})(\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(CreateMember, _Component2);\n\n  function CreateMember() {\n    _classCallCheck(this, CreateMember);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CreateMember).apply(this, arguments));\n  }\n\n  _createClass(CreateMember, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          visible = _this$props.visible,\n          onCancel = _this$props.onCancel,\n          onCreate = _this$props.onCreate,\n          form = _this$props.form;\n      var getFieldDecorator = form.getFieldDecorator;\n      return React.createElement(Modal, {\n        visible: visible,\n        title: \"Edit Member\",\n        okText: \"Edit\",\n        onCancel: onCancel,\n        onOk: onCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Form, {\n        layout: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        label: \"Member Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, getFieldDecorator('membername', {\n        rules: [{\n          required: true,\n          message: 'Please input member name!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeMembername,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Phone Number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, getFieldDecorator('tel', {\n        rules: [{\n          required: true,\n          message: 'Please input phone number!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeTel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Room Number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, getFieldDecorator('room', {\n        rules: [{\n          required: true,\n          message: 'Please input room number!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeRoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"E-mail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, getFieldDecorator('email', {\n        rules: [{\n          type: 'email',\n          message: 'The input is not valid E-mail!'\n        }, {\n          required: true,\n          message: 'Please input your E-mail!'\n        }]\n      })(React.createElement(Input, {\n        onChange: this.onChangeEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, getFieldDecorator('password', {\n        rules: [{\n          required: true,\n          message: 'Please input your Password!'\n        }]\n      })(React.createElement(Input, {\n        type: \"password\",\n        onChange: this.onChangePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return CreateMember;\n}(Component));\nexport default Member;","map":{"version":3,"sources":["/Users/berry/antd-demo/src/pages/Member.js"],"names":["React","Component","CreateMember","Table","Modal","Button","Divider","Form","Input","axios","confirm","domain","token","localStorage","getItem","header","Member","state","memberList","visible","membername","room","password","tel","email","showEditMoal","setState","handleCancel","handleCreate","form","formRef","props","validateFields","err","values","console","log","resetFields","saveFormRef","deleteMember","_id","delete","headers","then","data","filter","item","catch","error","title","okText","okType","cancelText","onOk","onCancel","get","columns","dataIndex","key","render","record","showDeleteConfirm","CollectionCreateForm","create","name","onCreate","getFieldDecorator","rules","required","message","onChangeMembername","onChangeTel","onChangeRoom","type","onChangeEmail","onChangePassword"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CreateMember from './CreateMember';\nimport { Table } from 'antd';\nimport { Modal,Button,Divider,Form, Input } from 'antd';\nimport axios from 'axios';\n\nconst confirm = Modal.confirm;\nconst domain = 'http://localhost:4000/members';\nconst token = localStorage.getItem('id_token')\nconst header = {'Authorization' : `Bearer ${token}`}\n\n\nclass Member extends Component {\n    state = {\n        memberList: [],\n        visible: false,\n        membername: '',\n        room: '',\n        password: '',\n        tel: '',\n        email: '',\n    };\n\n    showEditMoal = () => {\n        this.setState({ visible: true });\n      }\n    \n      handleCancel = () => {\n        this.setState({ visible: false });\n      }\n    \n      handleCreate = () => {\n        const form = this.formRef.props.form;\n        form.validateFields((err, values) => {\n          if (err) {\n            return;\n          }\n    \n          console.log('Received values of form: ', values);\n          form.resetFields();\n          this.setState({ visible: false });\n        });\n    }\n\n    saveFormRef = (formRef) => {\n        this.formRef = formRef;\n      }\n\n\n    deleteMember = (_id)=> {\n        axios.delete(`${domain}/`+_id,{ headers:header})\n        .then((data) => {\n          this.setState({\n            memberList: this.state.memberList.filter(item => item._id !== _id)\n          })\n          console.log(data);\n        }).catch((error) => {\n          console.log(error);\n        })\n      }\n\n      showDeleteConfirm(_id,membername){\n        console.log(_id)\n        confirm({\n          title: `Are you sure delete ${membername}?`,\n          okText: 'Yes',\n          okType: 'danger',\n          cancelText: 'No',\n          onOk:()=>{\n            this.deleteMember(_id);\n            console.log('OK')\n          },\n          onCancel() {\n            console.log('Cancel');\n          },\n        });\n      }\n\n    \n    componentDidMount() {\n      axios.get(domain, {headers: header})\n      .then((data) => {\n          this.setState({\n              memberList: data.data\n          });\n      }).catch((error) => {\n          console.log(error);\n      })\n\n    }\n    render(){\n        const columns = [{\n            title: 'Member Name',\n            dataIndex: 'membername',\n          }, {\n            title: 'Room Number',\n            dataIndex: 'room',\n          }, {\n            title: 'Phone Number',\n            dataIndex: 'tel',\n          }, {\n            title: 'Email',\n            dataIndex: 'email',\n          },{\n            title: 'Action',\n            key: 'action',\n            render: (record) => (\n        <span>\n          <Button onClick={() => this.showEditMoal(record._id)}>Edit</Button>\n          <Divider type=\"vertical\" />\n          <Button onClick={() =>this.showDeleteConfirm(record._id,record.membername)} type=\"danger\">Delete</Button>\n        </span>\n            ),\n          }];\n          \n          const { memberList } = this.state;\n        return(\n            <CreateMember/>,\n            <br/>,\n            <Table  rowKey={record => record._id} columns={columns} dataSource={memberList} />,\n            <CollectionCreateForm\n            wrappedComponentRef={this.saveFormRef}\n            visible={this.state.visible}\n            onCancel={this.handleCancel}\n            onCreate={this.handleCreate}\n          />\n\n        )\n    }\n}\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n\n\n class CreateMember extends Component {\n    render() {\n        const {\n          visible, onCancel, onCreate, form,\n        } = this.props;\n        const { getFieldDecorator } = form;\n  \n        return (\n          <Modal\n            visible={visible}\n            title=\"Edit Member\"\n            okText=\"Edit\"\n            onCancel={onCancel}\n            onOk={onCreate}\n          >\n            <Form layout=\"vertical\">\n              <Form.Item label=\"Member Name\">\n                {getFieldDecorator('membername', {\n                  rules: [{ required: true, message: 'Please input member name!' }],\n                })(\n                  <Input onChange={this.onChangeMembername}/>\n                )}\n              </Form.Item>\n              <Form.Item label=\"Phone Number\">\n              {getFieldDecorator('tel', {\n                  rules: [{ required: true, message: 'Please input phone number!' }],\n                })(\n                  <Input onChange={this.onChangeTel}/>\n                )}\n              \n              </Form.Item>\n              <Form.Item label=\"Room Number\">\n              {getFieldDecorator('room', {\n                  rules: [{ required: true, message: 'Please input room number!' }],\n                })(\n                  <Input onChange={this.onChangeRoom}/>\n                )}\n              \n              </Form.Item>\n              <Form.Item\n            label=\"E-mail\"\n          >\n            {getFieldDecorator('email', {\n              rules: [{\n                type: 'email', message: 'The input is not valid E-mail!',\n              }, {\n                required: true, message: 'Please input your E-mail!',\n              }],\n            })(\n              <Input onChange={this.onChangeEmail}/>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Password\">\n            {getFieldDecorator('password', {\n              rules: [{ required: true, message: 'Please input your Password!' }],\n            })(\n              <Input type=\"password\" onChange={this.onChangePassword}/>\n            )}\n          </Form.Item>\n            </Form>\n          </Modal>\n        );\n      }\n    }\n  );\n \n export default Member;"]},"metadata":{},"sourceType":"module"}