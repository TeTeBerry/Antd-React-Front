{"ast":null,"code":"import _classCallCheck from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/berry/antd-demo/client/src/pages/memberpage/SetupVolume.js\";\nimport React from \"react\";\nimport { Button, Modal, Form, Input, message, Card, Tag } from \"antd\";\nimport axios from \"axios\";\nimport q from \"querystring\";\nvar VolumeCreateForm = Form.create({\n  name: \"form_in_modal\"\n})(\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_class, _React$Component);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          visible = _this$props.visible,\n          onCancel = _this$props.onCancel,\n          onCreate = _this$props.onCreate,\n          form = _this$props.form;\n      var getFieldDecorator = form.getFieldDecorator;\n      return React.createElement(Modal, {\n        visible: visible,\n        title: \"Set up water volume\",\n        okText: \"Setup\",\n        onCancel: onCancel,\n        onOk: onCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 12\n        },\n        __self: this\n      }, React.createElement(Form, {\n        layout: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        label: \"Member Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, getFieldDecorator(\"memberName\", {\n        rules: [{\n          required: true,\n          message: \"Please input meter name!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Volume\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, getFieldDecorator(\"volume\", {\n        rules: [{\n          required: true,\n          message: \"Please input water volume!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(Tag, {\n        color: \"magenta\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"magenta\")), React.createElement(Card, {\n        style: {\n          width: 472\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Card content\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Card content\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Card content\")));\n    }\n  }]);\n\n  return _class;\n}(React.Component));\n\nvar SetupVolume =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(SetupVolume, _React$Component2);\n\n  function SetupVolume() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SetupVolume);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SetupVolume)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      visible: false\n    };\n\n    _this.error = function () {\n      message.error(\"Set up volume fail!\");\n    };\n\n    _this.showModal = function () {\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleCancel = function () {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.createSuccess = function () {\n      message.success(\"Set up volume success!\");\n    };\n\n    _this.handleCreate = function () {\n      var form = _this.formRef.props.form;\n      var formFields = form.getFieldsValue();\n      var formData = q.stringify({\n        memberName: formFields.memberName,\n        volume: formFields.volume\n      });\n      console.log(formData);\n      form.validateFields(function (err, values) {\n        if (err) {\n          return;\n        }\n\n        console.log(\"Received values of form: \", values);\n        form.resetFields();\n\n        _this.setState({\n          visible: false\n        });\n      });\n      axios.post(\"http://localhost:8080/iot/meter/setMemberVolume\", formData).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.code !== 200) {\n          return alert(res.data.msg);\n        }\n\n        _this.createSuccess();\n      });\n    };\n\n    _this.saveFormRef = function (formRef) {\n      _this.formRef = formRef;\n    };\n\n    return _this;\n  }\n\n  _createClass(SetupVolume, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Setup Volume\"), React.createElement(VolumeCreateForm, {\n        wrappedComponentRef: this.saveFormRef,\n        visible: this.state.visible,\n        onCancel: this.handleCancel,\n        onCreate: this.handleCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SetupVolume;\n}(React.Component);\n\nexport default SetupVolume;","map":{"version":3,"sources":["/Users/berry/antd-demo/client/src/pages/memberpage/SetupVolume.js"],"names":["React","Button","Modal","Form","Input","message","Card","Tag","axios","q","VolumeCreateForm","create","name","props","visible","onCancel","onCreate","form","getFieldDecorator","rules","required","width","Component","SetupVolume","state","error","showModal","setState","handleCancel","createSuccess","success","handleCreate","formRef","formFields","getFieldsValue","formData","stringify","memberName","volume","console","log","validateFields","err","values","resetFields","post","then","res","data","code","alert","msg","saveFormRef"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Button, Modal, Form, Input, message, Card, Tag } from \"antd\";\nimport axios from \"axios\";\nimport q from \"querystring\";\n\nconst VolumeCreateForm = Form.create({ name: \"form_in_modal\" })(\n  class extends React.Component {\n    render() {\n      const { visible, onCancel, onCreate, form } = this.props;\n      const { getFieldDecorator } = form;\n      return (\n        <Modal\n          visible={visible}\n          title=\"Set up water volume\"\n          okText=\"Setup\"\n          onCancel={onCancel}\n          onOk={onCreate}\n        >\n          <Form layout=\"vertical\">\n            <Form.Item label=\"Member Name\">\n              {getFieldDecorator(\"memberName\", {\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input meter name!\"\n                  }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Volume\">\n              {getFieldDecorator(\"volume\", {\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input water volume!\"\n                  }\n                ]\n              })(<Input />)}\n            </Form.Item>\n          </Form>\n          <div>\n            <Tag color=\"magenta\">magenta</Tag>\n          </div>\n          <Card style={{ width: 472 }}>\n            <p>Card content</p>\n            <p>Card content</p>\n            <p>Card content</p>\n          </Card>\n        </Modal>\n      );\n    }\n  }\n);\n\nclass SetupVolume extends React.Component {\n  state = {\n    visible: false\n  };\n  error = () => {\n    message.error(\"Set up volume fail!\");\n  };\n\n  showModal = () => {\n    this.setState({ visible: true });\n  };\n\n  handleCancel = () => {\n    this.setState({ visible: false });\n  };\n  createSuccess = () => {\n    message.success(\"Set up volume success!\");\n  };\n\n  handleCreate = () => {\n    const { form } = this.formRef.props;\n    const formFields = form.getFieldsValue();\n    const formData = q.stringify({\n      memberName: formFields.memberName,\n      volume: formFields.volume\n    });\n    console.log(formData);\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      console.log(\"Received values of form: \", values);\n      form.resetFields();\n      this.setState({ visible: false });\n    });\n\n    axios\n      .post(\"http://localhost:8080/iot/meter/setMemberVolume\", formData)\n      .then(res => {\n        console.log(res.data);\n        if (res.data.code !== 200) {\n          return alert(res.data.msg);\n        }\n        this.createSuccess();\n      });\n  };\n\n  saveFormRef = formRef => {\n    this.formRef = formRef;\n  };\n\n  render() {\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.showModal}>\n          Setup Volume\n        </Button>\n        <VolumeCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          onCreate={this.handleCreate}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SetupVolume;\n"]},"metadata":{},"sourceType":"module"}