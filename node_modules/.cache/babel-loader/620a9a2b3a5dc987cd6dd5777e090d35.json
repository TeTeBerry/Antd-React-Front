{"ast":null,"code":"import _classCallCheck from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/berry/antd-demo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/berry/antd-demo/client/src/pages/adminpage/ChangePW.js\";\nimport React from \"react\";\nimport { Select, Form, Icon, Input, Button, message } from \"antd\";\nimport \"./ChangePW.css\";\nimport AuthService from \"../auth/AuthService\";\nimport axios from \"axios\";\nimport q from \"querystring\";\nvar Option = Select.Option;\n\nvar ChangePW =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ChangePW, _React$Component);\n\n  function ChangePW() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ChangePW);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ChangePW)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.Auth = new AuthService();\n    _this.state = {\n      userName: \"\",\n      oldPwd: \"\",\n      newPwd: \"\"\n    };\n\n    _this.success = function () {\n      message.success(\"Update success!\");\n    };\n\n    _this.onChangeUserName = function (value) {\n      console.log(\"selected \".concat(value));\n\n      _this.setState({\n        userName: value\n      });\n    };\n\n    _this.onChangeOldPwd = function (e) {\n      _this.setState({\n        oldPwd: e.target.value\n      });\n    };\n\n    _this.onChangeNewPwd = function (e) {\n      _this.setState({\n        newPwd: e.target.value\n      });\n    };\n\n    _this.handleChangePw = function (e) {\n      e.preventDefault();\n      var user = q.stringify({\n        userName: _this.state.userName,\n        oldPwd: _this.state.oldPwd,\n        newPwd: _this.state.newPwd\n      });\n      console.log(user);\n      axios.post(\"http://localhost:8080/iot/admin/updatePassword\", user).then(function (res) {\n        if (res.data.code !== 200) {\n          return alert(res.data.msg);\n        }\n\n        console.log(res.data.code);\n\n        _this.props.history.push(\"/\" + _this.state.userName);\n\n        _this.success();\n      }).catch(function (error) {\n        console.log(error);\n        alert(\"Failure change password\");\n      });\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log(\"Received values of form: \", values);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ChangePW, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        className: \"ant-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleChangePw,\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, getFieldDecorator(\"userName\", {\n        rules: [{\n          required: true,\n          message: \"Please select person!\"\n        }]\n      })(React.createElement(Select, {\n        showSearch: true,\n        style: {\n          width: 200\n        },\n        placeholder: \"Select a person\",\n        optionFilterProp: \"children\",\n        onChange: this.onChangeUserName,\n        filterOption: function filterOption(input, option) {\n          return option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: \"admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Admin\"), React.createElement(Option, {\n        value: \"member\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Member\")))), React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, getFieldDecorator(\"oldPwd\", {\n        rules: [{\n          required: true,\n          message: \"Please input your old Password!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"lock\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }),\n        type: \"password\",\n        placeholder: \"old Password\",\n        style: {\n          width: \"200px\"\n        },\n        onChange: this.onChangeOldPwd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, getFieldDecorator(\"newPwd\", {\n        rules: [{\n          required: true,\n          message: \"Please input your new Password!\"\n        }, {\n          min: 4,\n          message: \"At least 4 digits!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"lock\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }),\n        type: \"password\",\n        placeholder: \"new Password\",\n        style: {\n          width: \"200px\"\n        },\n        onChange: this.onChangeNewPwd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: \"login-form-button\",\n        style: {\n          width: \"200px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Change password\")));\n    }\n  }]);\n\n  return ChangePW;\n}(React.Component);\n\nvar ChangePw = Form.create({\n  name: \"normal_login\"\n})(ChangePW);\nexport default ChangePw;","map":{"version":3,"sources":["/Users/berry/antd-demo/client/src/pages/adminpage/ChangePW.js"],"names":["React","Select","Form","Icon","Input","Button","message","AuthService","axios","q","Option","ChangePW","Auth","state","userName","oldPwd","newPwd","success","onChangeUserName","value","console","log","setState","onChangeOldPwd","e","target","onChangeNewPwd","handleChangePw","preventDefault","user","stringify","post","then","res","data","code","alert","msg","props","history","push","catch","error","form","validateFields","err","values","getFieldDecorator","rules","required","width","input","option","children","toLowerCase","indexOf","color","min","Component","ChangePw","create","name"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Select, Form, Icon, Input, Button, message } from \"antd\";\nimport \"./ChangePW.css\";\nimport AuthService from \"../auth/AuthService\";\nimport axios from \"axios\";\nimport q from \"querystring\";\n\nconst Option = Select.Option;\n\nclass ChangePW extends React.Component {\n  Auth = new AuthService();\n  state = {\n    userName: \"\",\n    oldPwd: \"\",\n    newPwd: \"\"\n  };\n\n  success = () => {\n    message.success(\"Update success!\");\n  };\n\n  onChangeUserName = value => {\n    console.log(`selected ${value}`);\n    this.setState({\n      userName: value\n    });\n  };\n\n  onChangeOldPwd = e => {\n    this.setState({\n      oldPwd: e.target.value\n    });\n  };\n\n  onChangeNewPwd = e => {\n    this.setState({\n      newPwd: e.target.value\n    });\n  };\n\n  handleChangePw = e => {\n    e.preventDefault();\n    const user = q.stringify({\n      userName: this.state.userName,\n      oldPwd: this.state.oldPwd,\n      newPwd: this.state.newPwd\n    });\n    console.log(user);\n\n    axios\n      .post(\"http://localhost:8080/iot/admin/updatePassword\", user)\n      .then(res => {\n        if (res.data.code !== 200) {\n          return alert(res.data.msg);\n        }\n        console.log(res.data.code);\n        this.props.history.push(\"/\" + this.state.userName);\n        this.success();\n      })\n      .catch(error => {\n        console.log(error);\n        alert(\"Failure change password\");\n      });\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log(\"Received values of form: \", values);\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n\n    return (\n      <div className=\"ant-form\">\n        <Form onSubmit={this.handleChangePw} className=\"login-form\">\n          <Form.Item>\n            {getFieldDecorator(\"userName\", {\n              rules: [{ required: true, message: \"Please select person!\" }]\n            })(\n              <Select\n                showSearch\n                style={{ width: 200 }}\n                placeholder=\"Select a person\"\n                optionFilterProp=\"children\"\n                onChange={this.onChangeUserName}\n                filterOption={(input, option) =>\n                  option.props.children\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                }\n              >\n                <Option value={\"admin\"}>Admin</Option>\n                <Option value={\"member\"}>Member</Option>\n              </Select>\n            )}\n          </Form.Item>\n\n          <Form.Item>\n            {getFieldDecorator(\"oldPwd\", {\n              rules: [\n                { required: true, message: \"Please input your old Password!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                type=\"password\"\n                placeholder=\"old Password\"\n                style={{ width: \"200px\" }}\n                onChange={this.onChangeOldPwd}\n              />\n            )}\n          </Form.Item>\n          <Form.Item>\n            {getFieldDecorator(\"newPwd\", {\n              rules: [\n                { required: true, message: \"Please input your new Password!\" },\n                { min: 4, message: \"At least 4 digits!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                type=\"password\"\n                placeholder=\"new Password\"\n                style={{ width: \"200px\" }}\n                onChange={this.onChangeNewPwd}\n              />\n            )}\n          </Form.Item>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            className=\"login-form-button\"\n            style={{ width: \"200px\" }}\n          >\n            Change password\n          </Button>\n        </Form>\n      </div>\n    );\n  }\n}\n\nconst ChangePw = Form.create({ name: \"normal_login\" })(ChangePW);\n\nexport default ChangePw;\n"]},"metadata":{},"sourceType":"module"}